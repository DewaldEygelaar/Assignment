Building DAG of jobs...
Provided cores: 2
Rules claiming more threads will be scaled down.
Job counts:
	count	jobs
	1	all
	1	bcftools_call
	2	fastqc
	2	merge_fastq
	1	metrics
	2	minimap2
	1	plot_quals
	2	samtools_index
	2	samtools_sort
	14

rule merge_fastq:
    input: data/samples/HyperPrep_R1.fastq, data/samples/HyperPrep_R2.fastq
    output: data/samples/combined/combined_HyperPrep.fastq
    jobid: 1
    wildcards: sample=HyperPrep


rule merge_fastq:
    input: data/samples/HyperPlus_R1.fastq, data/samples/HyperPlus_R2.fastq
    output: data/samples/combined/combined_HyperPlus.fastq
    jobid: 6
    wildcards: sample=HyperPlus

Finished job 1.
1 of 14 steps (7%) done

rule minimap2:
    input: data/Ecoli.fa, data/samples/combined/combined_HyperPrep.fastq
    output: mapped_reads/combined_HyperPrep.bam
    jobid: 10
    wildcards: sample=HyperPrep

Finished job 6.
2 of 14 steps (14%) done

rule minimap2:
    input: data/Ecoli.fa, data/samples/combined/combined_HyperPlus.fastq
    output: mapped_reads/combined_HyperPlus.bam
    jobid: 11
    wildcards: sample=HyperPlus

Finished job 11.
3 of 14 steps (21%) done

rule samtools_sort:
    input: mapped_reads/combined_HyperPlus.bam
    output: sorted_reads/combined_HyperPlus.bam
    jobid: 8
    wildcards: sample=HyperPlus

Finished job 10.
4 of 14 steps (29%) done

rule samtools_sort:
    input: mapped_reads/combined_HyperPrep.bam
    output: sorted_reads/combined_HyperPrep.bam
    jobid: 7
    wildcards: sample=HyperPrep

Finished job 8.
5 of 14 steps (36%) done

rule samtools_index:
    input: sorted_reads/combined_HyperPlus.bam
    output: sorted_reads/combined_HyperPlus.bam.bai
    jobid: 13
    wildcards: sample=HyperPlus

Finished job 13.
6 of 14 steps (43%) done

rule fastqc:
    input: data/samples/combined/combined_HyperPlus.fastq
    output: fastQC/combined_HyperPlus_fastqc.zip
    jobid: 2
    wildcards: sample=HyperPlus

Finished job 7.
7 of 14 steps (50%) done

rule samtools_index:
    input: sorted_reads/combined_HyperPrep.bam
    output: sorted_reads/combined_HyperPrep.bam.bai
    jobid: 12
    wildcards: sample=HyperPrep

Finished job 12.
8 of 14 steps (57%) done

rule bcftools_call:
    input: data/Ecoli.fa, sorted_reads/combined_HyperPlus.bam, sorted_reads/combined_HyperPrep.bam, sorted_reads/combined_HyperPlus.bam.bai, sorted_reads/combined_HyperPrep.bam.bai
    output: calls/all.vcf
    jobid: 9

Finished job 2.
9 of 14 steps (64%) done

rule fastqc:
    input: data/samples/combined/combined_HyperPrep.fastq
    output: fastQC/combined_HyperPrep_fastqc.zip
    jobid: 5
    wildcards: sample=HyperPrep

Finished job 5.
10 of 14 steps (71%) done

rule metrics:
    input: sorted_reads/combined_HyperPlus.bam, sorted_reads/combined_HyperPrep.bam
    output: metrics/metrics.csv
    jobid: 3

Finished job 3.
11 of 14 steps (79%) done
Finished job 9.
12 of 14 steps (86%) done

rule plot_quals:
    input: calls/all.vcf
    output: plots/quals.svg
    jobid: 4

Finished job 4.
13 of 14 steps (93%) done

localrule all:
    input: plots/quals.svg, fastQC/combined_HyperPlus_fastqc.zip, fastQC/combined_HyperPrep_fastqc.zip, data/samples/combined/combined_HyperPlus.fastq, data/samples/combined/combined_HyperPrep.fastq, metrics/metrics.csv
    jobid: 0

Finished job 0.
14 of 14 steps (100%) done
